<app-nav-bar></app-nav-bar>
<div class="container mx-auto mt-10 px-4">
  <h2 class="text-3xl font-bold mb-6 text-gray-800">User Role Dashboard</h2>

  <div class="overflow-x-auto">
    <table class="min-w-full bg-white shadow-md rounded-lg border border-gray-200">
      <thead class="bg-gray-200 text-gray-600">
      <tr>
        <th class="py-3 px-6 text-left font-semibold">Username</th>
        <th class="py-3 px-6 text-left font-semibold">Email</th>
        <th class="py-3 px-6 text-left font-semibold">Roles</th>
        <th class="py-3 px-6 text-left font-semibold">Actions</th>
      </tr>
      </thead>
      <tbody class="text-gray-700">
      <tr *ngFor="let user of users" class="border-b hover:bg-gray-50">
        <td class="py-3 px-6">{{ user.username }}</td>
        <td class="py-3 px-6">{{ user.email }}</td>
        <td class="py-3 px-6">
          <div class="flex flex-wrap gap-2">
              <span *ngFor="let role of user.Roles" class="inline-flex items-center px-3 py-1.5 text-sm font-medium rounded-full bg-blue-100 text-blue-800">
                {{ role.role_name }}
                <button (click)="removeRole(user.user_id, role.role_id)" class="ml-2 text-red-500 hover:text-red-700 transition">
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
                  </svg>
                </button>
              </span>
          </div>
        </td>
        <td class="py-3 px-6">
          <div class="flex items-center gap-2">
            <select [(ngModel)]="selectedRoleId" class="form-select border-gray-300 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm">
              <option *ngFor="let role of roles" [value]="role.role_id">{{ role.role_name }}</option>
            </select>
            <button (click)="addRole(user.user_id)" class="inline-flex items-center px-3 py-1.5 text-sm font-medium text-white bg-blue-500 rounded-md shadow-sm hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                <path stroke-linecap="round" stroke-linejoin="round" d="M12 4v16m8-8H4" />
              </svg>
              Add Role
            </button>
          </div>
        </td>
      </tr>
      </tbody>
    </table>
  </div>
</div>
